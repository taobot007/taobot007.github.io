---
layout: post
title: 系统设计
date: 2016-06-01
tag: Leetcode
---

## 一些预备知识

QPS：Quest Per Second
TPS: Transactions Per Second. 一个transaction有可能由多个quest组成

分析QPS有什么用：  

QPS = 100：用你的笔记本做Web服务器就好了  
QPS = 1K：用一台好一点的Web服务器差不多，需要考虑Single Point Failure，可能某个进程死锁，卡住了什么的。   
QPS = 1m：需要建设一个1000台Web服务器的集群，考虑Maintainance（某一台挂了怎么办）

QPS和Web Server/Database之间的关系：  

一台Web Server约承受量是1k的QPS（考虑到逻辑处理时间以及数据库查询的瓶颈）  
一台SQL Database约承受量是1k的QPS（如果JOIN和INDEX query比较多的话，这个值会更小）  
一台NoSQL Databse（Cassandra）的承受量是10k的QPS  
一台NoSQL Databse（Memcashed）的承受量是1M的QPS（可以算是一个缓存，在内存中走，不在磁盘走，速度快）

## 典型的大型网站构架
![大型网站构架](/assets/images/大型网站构架.png)

CDN： Content Delivery Network


## 系统设计步骤：SNAKE方法

* 第一步： 描述使用场景，看要实现哪些功能： Scenario
    有哪些feature？有interface还是只有一个API server？Read-heavy or Write-heavy? Security?

* 第二步： 让系统运行起来的必要硬件条件： Necessary
    DAU？ QPS？

* 第三步： 应用/算法： Applicaton
    1， 画出major components，可以是分功能，可以是分层等。
    2， 找出可能出现的bottleneck，即最有可能出问题的地方。针对这些地方，设计时需小心。

* 第四步： 数据： Kilobit
    针对不同的component，选择最佳的存储方式

* 第五步： 进化： Evolve
    怎样来scale？怎样保证high availability？





https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md
